<template>
  <mp-slide>
    <template #header>
      <h1>–†–æ–ª–µ–≤–∞—è –º–æ–¥–µ–ª—å –¥–æ—Å—Ç—É–ø–∞ (RBAC)</h1>
    </template>

    <div class="rbac-container">
      <div class="description">
        <h2>–°–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞</h2>
        <p>
          –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∂–µ—Å—Ç–∫–æ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —á–µ—Ä–µ–∑ enum BoardRole –≤ Prisma.
          –ö–∞–∂–¥–∞—è —Ä–æ–ª—å –∏–º–µ–µ—Ç —á–µ—Ç–∫–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏.
        </p>
        <p>
          –°—Ç—Ä–æ–≥–∞—è –∏–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Ç–µ –¥–æ—Å–∫–∏, –∫—É–¥–∞ –æ–Ω
          –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø.
        </p>
      </div>

      <div class="table-container">
        <mp-table
          :items="roleItems"
          :columns="columns"
          variant="outlined"
          hover
          striped
          dense
          padding="m"
          body-text-size="title"
          header-text-size="title"
        >
          <template #cell-role="{ value }">
            <strong>{{ value }}</strong>
          </template>
        </mp-table>
      </div>

      <div class="roles-description">
        <mp-bento-grid :cols="3" :rows="2" gap="m">
          <mp-bento-tile variant="outlined">
            <template #title>
              <h3>üëë Owner</h3>
            </template>
            <p>–ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø, —É–¥–∞–ª–µ–Ω–∏–µ –¥–æ—Å–∫–∏, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è–º–∏</p>
          </mp-bento-tile>

          <mp-bento-tile variant="outlined">
            <template #title>
              <h3>‚úèÔ∏è Editor</h3>
            </template>
            <p>–°–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞, –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –∑–∞–¥–∞—á</p>
          </mp-bento-tile>

          <mp-bento-tile variant="outlined">
            <template #title>
              <h3>üëÅÔ∏è Viewer</h3>
            </template>
            <p>–¢–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ (Read-only –¥–æ—Å—Ç—É–ø)</p>
          </mp-bento-tile>
        </mp-bento-grid>
      </div>
    </div>
  </mp-slide>
</template>

<script setup lang="ts">
import type { TableColumn } from "../components/mp-table.vue";

interface RoleItem {
  role: string;
  createTasks: string;
  deleteTasks: string;
  moveTasks: string;
  boardSettings: string;
}

const columns: TableColumn[] = [
  { key: "role", label: "–†–æ–ª—å", width: "20%" },
  { key: "createTasks", label: "–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á", width: "20%", align: "center" },
  { key: "deleteTasks", label: "–£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á", width: "20%", align: "center" },
  { key: "moveTasks", label: "–ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ", width: "20%", align: "center" },
  { key: "boardSettings", label: "–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–æ—Å–∫–∏", width: "20%", align: "center" },
];

const roleItems: RoleItem[] = [
  {
    role: "Owner",
    createTasks: "‚úÖ",
    deleteTasks: "‚úÖ",
    moveTasks: "‚úÖ",
    boardSettings: "‚úÖ",
  },
  {
    role: "Editor",
    createTasks: "‚úÖ",
    deleteTasks: "‚úÖ",
    moveTasks: "‚úÖ",
    boardSettings: "‚ùå",
  },
  {
    role: "Viewer",
    createTasks: "‚ùå",
    deleteTasks: "‚ùå",
    moveTasks: "‚ùå",
    boardSettings: "‚ùå",
  },
];

definePageMeta({
  layout: "default",
});
</script>

<style scoped>
.rbac-container {
  height: 100%;
  display: grid;
  grid-template-rows: auto min-content 1fr;
  gap: calc(var(--sp-xl) * 2.5);
  align-content: start;
}

.description {
  display: grid;
  gap: var(--sp-s);
}

.description h2 {
  margin: 0;
  color: var(--clr-primary);
}

.description p {
  margin: 0;
  line-height: 1.5;
}

.table-container {
  display: flex;
  flex-direction: column;
  min-height: 0;
}

.roles-description {
  display: flex;
  flex-direction: column;
  min-height: 0;
}

.roles-description :deep(.teamly-bento-grid) {
  flex: 1;
  align-items: stretch;
}
</style>

